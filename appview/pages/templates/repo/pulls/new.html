{{ define "title" }}new pull | {{ .RepoInfo.FullName }}{{ end }}

{{ define "repoContent" }}
    <form
        hx-post="/{{ .RepoInfo.FullName }}/pulls/new"
        class="mt-6 space-y-6"
        hx-swap="none"
    >
        <div class="flex flex-col gap-4">
            <div>
                <label for="title">write a title</label>
                <input type="text" name="title" id="title" class="w-full" />

                <label for="targetBranch">select a target branch</label>
                <p class="text-gray-500">
                    The branch you want to make your change against.
                </p>
                <select
                    name="targetBranch"
                    class="p-1 border border-gray-200 bg-white"
                >
                    <option disabled selected>select a branch</option>
                    {{ range .Branches }}
                        <option value="{{ .Reference.Name }}" class="py-1">
                            {{ .Reference.Name }}
                        </option>
                    {{ end }}
                </select>
            </div>
            <div>
                <label for="body">add a description</label>
                <textarea
                    name="body"
                    id="body"
                    rows="6"
                    class="w-full resize-y"
                    placeholder="Describe your change. Markdown is supported."
                ></textarea>

                <div class="mt-4">
                    <label for="patch">paste your patch here</label>
                    <textarea
                        name="patch"
                        id="patch"
                        rows="10"
                        class="w-full resize-y font-mono"
                        placeholder="Paste your git-format-patch output here."
                        hx-post="/pulls/validate"
                        hx-trigger="input changed delay:500ms"
                        hx-target="#patch-validation"
                        hx-include="[name='patch']"
                    ></textarea>
                    <div id="pull-validate"></div>
                </div>
            </div>
            <div>
                <button type="submit" class="btn">create</button>
            </div>
        </div>
        <div id="pull" class="error"></div>
    </form>
{{ end }}
